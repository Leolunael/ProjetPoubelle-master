{% extends 'base.html.twig' %}
{% block title %}Mes signalements{% endblock %}

{% block body %}
<div class="container mt-4">
    <h2>🗑️ Mes signalements</h2>

    <ul class="list-group mt-3">
        {% for s in signalements %}
            <li class="list-group-item d-flex justify-content-between align-items-center">
                <div>
                    📍 {{ s.adresse }} – {{ s.date|date('d/m/Y') }}
                    {% if s.commentaire %}
                        <br><em>{{ s.commentaire }}</em>
                    {% endif %}
                </div>
                <div>
                    <a href="{{ path('user_signalement_edit', {id: s.id}) }}" class="btn btn-warning btn-sm">Modifier</a>
                    
                    <form method="post" action="{{ path('user_signalement_delete', {id: s.id}) }}" style="display:inline-block" onsubmit="return confirm('Supprimer ce signalement ?');">
                        <input type="hidden" name="_token" value="{{ csrf_token('delete_signalement_' ~ s.id) }}">
                        <button class="btn btn-danger btn-sm">Supprimer</button>
                    </form>
                </div>
            </li>
        {% else %}
            <li class="list-group-item">Aucun signalement enregistré.</li>
        {% endfor %}
    </ul>

    <a href="{{ path('user_points') }}" class="btn btn-secondary mt-3">⬅ Retour à l’espace utilisateur</a>
</div>
{% endblock %}
